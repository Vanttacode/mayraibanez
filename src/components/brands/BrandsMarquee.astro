---
const { brands = [] } = Astro.props as {
  brands: { name: string; logo_url: string | null }[];
};

const items = brands.filter(b => !!b.logo_url);
---

{items.length > 0 ? (
  <section class="w-full">
    {/* Contenedor estilo "Barbie Box": Borde rosa, fondo sutil, esquinas redondeadas */}
    <div class="relative w-full overflow-hidden mask-gradient-soft bg-pink-50/30 border-2 border-pink-100 rounded-[2.5rem] py-8 shadow-inner">
      
      {/* Carrusel Infinito */}
      <div class="flex items-center gap-12 md:gap-24 animate-marquee whitespace-nowrap px-4">
        {/* Repetimos los items varias veces para el loop perfecto */}
        {[...items, ...items, ...items, ...items, ...items, ...items].map((logo) => (
          <div class="flex items-center justify-center shrink-0 group transform transition-transform">
            <img
              src={logo.logo_url!}
              alt={logo.name}
              /* ESTÉTICA BARBIE:
                 1. opacity-60 saturate-50: Suaves y no invasivos en reposo.
                 2. hover:POP: Color total, crecen y sueltan sombra rosa.
              */
              class="h-10 md:h-14 w-auto max-w-[140px] object-contain transition-all duration-300 
                     opacity-60 saturate-50 brightness-105 
                     hover:opacity-100 hover:saturate-100 hover:scale-110 hover:drop-shadow-[0_4px_6px_rgba(236,72,153,0.3)] cursor-pointer"
              loading="lazy"
            />
          </div>
        ))}
      </div>

    </div>
  </section>
) : null}

<style>
  .animate-marquee {
    /* 40s: Un ritmo alegre pero elegante */
    animation: marquee 40s linear infinite;
    width: max-content;
    will-change: transform;
  }
  
  .animate-marquee:hover { animation-play-state: paused; }

  @keyframes marquee {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  /* Máscara suave para difuminar los bordes */
  .mask-gradient-soft {
    mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
  }
</style>